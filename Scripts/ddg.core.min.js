tttime=new Date;window.ddg={behaviours:{},enums:{},exceptions:{}};ddg.extensions={registerExtension:function(a,b,c){a[b]||(a[b]=c)}};ddg.registerExtension=ddg.extensions.registerExtension;ddg.registerExtension(String.prototype,"trimHTML",function(){return this.replace(/(^(\s+|\xc2+|\xa0+|&nbsp;)+)|((\s+|\xc2+|\xa0+|&nbsp;)+)$/g,"")});ddg.registerExtension(String.prototype,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});
ddg.registerExtension(String.prototype,"trimNB",function(){return this.replace(/^((\s+|\xa0)+)|((\s|\xa0)+)$/,"")});ddg.registerExtension(String.prototype,"contains",function(a){return this.indexOf(a)>-1});ddg.registerExtension(String.prototype,"startsWith",function(a){return this.indexOf(a)===0});ddg.registerExtension(String.prototype,"endsWith",function(a){return this.indexOf(a,this.length-a.length)!==-1});
ddg.registerExtension(String.prototype,"capitalise",function(){return this.charAt(0).toUpperCase()+this.slice(1)});ddg.registerExtension(Array.prototype,"contains",function(a){for(var b=this.length;b--;)if(this[b]===a)return!0;return!1});ddg.registerExtension(Array.prototype,"indexOf",function(a,b){var c=this.length;b=Number(b)||0;b=b<0?Math.ceil(b):Math.floor(b);for(b<0&&(b+=c);b<c;b++)if(b in this&&this[b]===a)return b;return-1});ddg.registerExtension(Array.prototype,"clone",function(){return ddg.util.cloneArray(this)});
ddg.registerExtension(Array.prototype,"each",function(a,b){for(var c=0,d=this.length;c<d;c++)if(a.apply(b||this[c],[c,this[c]])===!1)break});ddg.registerExtension(Array.prototype,"remove",function(a){a=this.indexOf(a);a>=0&&this.splice(a,1);return a>=0});ddg.registerExtension(Function.prototype,"bind",function(){var a=[],b=a.shift.call(arguments)||window,c=a.slice.call(arguments),d=this;return function(){for(var e=[],f=0;f<c.length;f++)e.push(c[f]);f=a.slice.call(arguments);return d.apply(b,e.concat(f))}});
ddg.enums.classification={ddgClass:1,ddgInterface:2,ddgEnum:3};ddg.enums.optionUsage={NotSet:0,Use:1,Disable:2};
ddg.util={getQuerystring:function(a){a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return a==null?"":a[1]},isArray:function(a){return Boolean(a&&a instanceof Array)},ensureArray:function(a,b){return this.isArray(a)?b?a.clone():a:this.isDefined(a)?[a]:[]},isFunction:function(a){return typeof a==="function"},findDuplicateObjects:function(a){if(!this.isArray(a))throw new ddg.exceptions.invalidTypeException({msg:"findDuplicateObjects expects to be passed an array"});var b=a.length,c=[];
if(b<=1)return c;for(;b--;)for(var d=a[b],e=b;e--;)if(a[e]===d){e=c.length;for(var f=!1;e--;)if(c[e]===d){f=!0;break}f||c.push(d);break}return c},isNothing:function(a){return typeof a=="undefined"||a==null},isSomething:function(a){return typeof a!="undefined"&&a!=null},isUndefined:function(a){return typeof a=="undefined"},isDefined:function(a){return typeof a!="undefined"},isNumeric:function(a){return a===a*1},isInteger:function(a){return String(a).match(/^[0-9]*$/)},isString:function(a){return typeof a===
"string"},isBoolean:function(a){return typeof a==="boolean"},isNumber:function(a){return typeof a==="number"},toFQN:function(a,b){if(ddg.type.isDdgItem(a))b=a.__ddg_props.name,a=a.__ddg_props.namespaceName;return(a+"."+b).replace(/^\./,"")},addEvent:function(a,b,c){document.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},getObjectProperties:function(a){var b=[],c;for(c in a)b.push({name:c,type:c==null?"null":typeof a[c]});return b},clone:function(a){return this.extend({},a)},
extend:function(){for(var a=arguments[0]||{},b=1,c=arguments.length,d,e,f;b<c;b++)if((d=arguments[b])!=null)for(e in d)if(f=d[e],f!==void 0)try{a[e]=f}catch(g){}return a},deepCopy:function(a){var b=this.isArray(a)?[]:{};for(name in a){var c=a[name];b[name]=c===null?null:c!==a&&(this.isPlainObject(c)||this.isArray(c))?this.deepCopy(c):c}return b},cloneArray:function(a){return a.slice(0)},isObject:function(a){return typeof a==="object"},isPlainObject:function(a){return this.isObject(a)&&!this.isNode(a)},
createElement:function(a,b){var c=!1,d="";if(a=="button"||a=="checkbox"||a=="file"||a=="hidden"||a=="image"||a=="password"||a=="radio"||a=="reset"||a=="submit"||a=="text")c=!0,d=a,a="input";var e=!1,f=0;a.startsWith("select")&&(a.length>6&&(e=a.substring(6),isNumeric(e)&&(f=parseInt(e)),a="select"),e=!0);var g=(b||document).createElement(a);if(c)g.type=d;if(e&&f>0)g.size=f;return g},random:function(a,b){var c=a,d=0;typeof b!="undefined"&&(d=a,c=b);return d+Math.floor((c-d+1)*Math.random())},consoleWarn:function(a){this.isSomething(window.console)&&
console.warn(a)},consoleLog:function(a){this.isSomething(window.console)&&console.log(a)},isNode:function(a){if(!a||!this.isObject(a))return!1;var b=this.getOwnerWindow(a);return b&&window.Node&&this.isObject(Node)?a instanceof b.Node:this.isNumber(a.nodeType)&&this.isString(a.nodeName)},isElement:function(a){return this.isNode(a)&&a.nodeType===1},dotify:function(a){return"."+a},iconify:function(a,b){var c="di-"+a;b&&(c="."+c);return c},hashify:function(a){return"#"+a},hasProps:function(a){var b=
!1,c;for(c in a){b=!0;break}return b},_safeRoot:null,_safeObj:null,getSafely:function(a,b){this._safeRoot=b||window;this._safeObj=void 0;try{eval("this._safeObj = this._safeRoot."+a)}catch(c){}var d=this._safeObj;this._safeRoot=this._safeObj=null;return d},getWindow:function(a){a instanceof $ddg&&a.length>0&&(a=a[0]);return a.defaultView||a.parentWindow},getOwnerDocument:function(a){a instanceof $ddg&&a.length>0&&(a=a[0]);return a.ownerDocument},getOwnerWindow:function(a){var b=void 0;(a=this.getOwnerDocument(a))&&
(b=this.getWindow(a));return b},extendClassName:function(a,b){return((a||"")+" "+b).trim()},_extendStatic:function(a,b){var c=this.extend({},a),d;for(name in b)d=b[name],d!==void 0&&(c[name]=c[name]&&typeof d==="object"&&d&&d.__ddg_extend?this.extend({},c[name],d):d);return c},setCookie:function(a,b,c){var d=new Date;c=this.isNumeric(c)?c:14;d.setDate((new Date).getDate()+c);a=a+"="+escape(b)+"; expires="+d.toGMTString()+";";document.cookie=a},getCookie:function(a){var b=document.cookie;a+="=";var c=
b.indexOf("; "+a);if(c==-1){if(c=b.indexOf(a),c!=0)return null}else c+=2;var d=document.cookie.indexOf(";",c);if(d==-1)d=b.length;return unescape(b.substring(c+a.length,d))},getUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;return(a=="x"?b:b&3|8).toString(16)})},contains:function(a,b){return ddg.util.isElement(a)&&ddg.util.isElement(b)?Boolean(a.contains?a!=b&&a.contains(b):!!(a.compareDocumentPosition(b)&16)):!1},_encoder:null,_getEncoder:function(){if(!this._encoder)this._encoder=
$ddg("<div/>");return this._encoder},htmlEncode:function(a){return this._getEncoder().text(a).html()},htmlDecode:function(a){return this._getEncoder().html(a).text()}};$ddgcreateElement=ddg.util.createElement.bind(ddg.util);$ddgconsoleWarn=ddg.util.consoleWarn.bind(ddg.util);
ddg._interface={createInterface:function(a,b,c){var d={};d.__ddg_props={type:ddg.enums.classification.ddgInterface,namespaceName:a,name:b};d.definition=ddg.util.getObjectProperties(c);return d},checkDuplicates:function(a,b,c){a=ddg.util.findDuplicateObjects(a);var d=a.length;if(d>0){for(var e="";d--;)e!=""&&(e+=", "),e+=ddg.util.toFQN(a[d]);throw new ddg.exceptions.duplicateException({msg:"Duplicate interface definition(s) found on "+ddg.util.toFQN(b,c)+" ["+e+"]"});}},ensureImplemented:function(a,
b,c,d){b=ddg.util.getObjectProperties(b);for(var e=a.length;e--;)for(var f=a[e],g=f.definition,j=g.length;j--;){for(var k=g[j],m=k.name,l=k.type,q=b.length,n=!1;q--;){var h=b[q],o=h.name,s=h.type;if(h.name==m){n=!0;if(s!="null"&&l!="null"&&s!=l)throw new ddg.exceptions.invalidTypeException({msg:"Class item "+o+" on "+ddg.util.toFQN(c,d)+" is of type '"+s+"' but interface "+ddg.util.toFQN(f)+" defines it as '"+l+"'"});break}}if(!n)throw new ddg.exceptions.notImplementedException({msg:"Interface item "+
m+" (type '"+k.type+"') from "+ddg.util.toFQN(f)+" does not exist on "+ddg.util.toFQN(c,d)});}}};ddg._behaviourExtenders={top:{behaviours:function(a){var b=ddg._behaviours.getActiveBehaviours(this);return b[a]?b[a]:{exec:function(){},exists:!1}}},sub:{add:function(a,b){return ddg._behaviours.add(this,a,b)},remove:function(a){ddg._behaviours.remove(this,a)}}};
ddg._behaviours={createClosures:function(a){var b=a.behaviours,c=function(){return b.apply(a,arguments)},d=ddg._behaviourExtenders.sub;c.add=function(){return d.add.apply(a,arguments)};c.remove=function(){return d.remove.apply(a,arguments)};a.behaviours=c},add:function(a,b,c){b=ddg.util.ensureArray(b);var d=ddg._behaviours.getActiveBehaviours(a);c=ddg.util.isUndefined(c)?[]:ddg.util.ensureArray(c);for(var e=0,f=b.length;e<f;e++){var g=b[e];if(!d[g]){var j=ddg._behaviourRefs[g];if(!j)throw new ddg.exceptions.notFoundException({msg:'Behaviour "'+
g+'" cannot be found'});var k=g+"_params",m=g+"_events";k=a[k]?a[k].apply(a,c):{};m=a[m]?a[m].apply(a,c):void 0;j=$ddgcreate({type:j,creator:a,_host:a,params:k,events:m});d[g]=j}}},remove:function(a,b){b=ddg.util.ensureArray(b);for(var c=ddg._behaviours.getActiveBehaviours(a),d=0,e=b.length;d<e;d++){var f=b[d];c[f]&&(c[f].dispose(),delete c[f])}},getActiveBehaviours:function(a){if(!a.behaviours.active)a.behaviours.active={};return a.behaviours.active},disposeBehaviours:function(a){a=ddg._behaviours.getActiveBehaviours(a);
for(var b in a)a[b].dispose(),delete a[b]}};ddg._enum={createEnum:function(a,b,c){var d={};if(ddg.util.isArray(c))for(var e=c.length;e--;)d[c[e]]=e;else for(e in c)d[e]=c[e];d.__ddg_props={type:ddg.enums.classification.ddgEnum,namespaceName:a,name:b};return d}};
ddg.type={getType:function(a){return typeof a=="function"?a:typeof a=="object"?a.constructor:typeof a},getName:function(a){return a.__ddg_props.name},getFullName:function(a){return ddg.util.toFQN(a)},getBase:function(a){a=a.__ddg_props.baseClasses;return a.length>0?a[a.length-1]:null},inheritsFrom:function(a,b){if(!this.isDdgObjectOrClass(a))return!1;return this.isDdgObject(a)?a&&a instanceof b:a.__ddg_props.baseClasses.contains(b)},implementsInterface:function(a,b){if(!this.isDdgObjectOrClass(a))return!1;
return this.isDdgObject(a)?a.getType().__ddg_props.interfaces.contains(b):a.__ddg_props.interfaces.contains(b)},isDdgObject:function(a){return a&&typeof a=="object"&&a instanceof ddg._class},isClass:function(a){return a&&a.__ddg_props&&a.__ddg_props.type===ddg.enums.classification.ddgClass},isDdgObjectOrClass:function(a){return this.isDdgObject(a)||this.isClass(a)},isInterface:function(a){return a&&a.__ddg_props&&a.__ddg_props.type===ddg.enums.classification.ddgInterface},isEnum:function(a){return a&&
a.__ddg_props&&a.__ddg_props.type===ddg.enums.classification.ddgEnum},isDdgItem:function(a){return a&&a.__ddg_props&&a.__ddg_props.type},ensureDdgObject:function(a){if(!this.isDdgObject(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg object"});},ensureClass:function(a){if(!this.isClass(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg class"});},ensureDdgObjectOrClass:function(a){if(!this.isDdgObjectOrClass(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg object or class"});
},ensureInterface:function(a){if(!this.isInterface(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg interface"});},ensureEnum:function(a){if(!this.isEnum(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg enum"});},ensureDdgItem:function(a){if(!this.isDdgItem(a))throw new ddg.exceptions.invalidTypeException({msg:"Item must be a ddg item"});}};var vs2010fix=null;
(function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/,c=function(a,b,c,d){var e=b===ddg.enums.optionUsage.Disable||c===ddg.enums.optionUsage.Disable;(c=!e&&b!==ddg.enums.optionUsage.Use&&c===ddg.enums.optionUsage.Use)&&ddg.util.extend(a,d);return e?ddg.enums.optionUsage.Disable:b===ddg.enums.optionUsage.Use||c?ddg.enums.optionUsage.Use:ddg.enums.optionUsage.NotSet};ddg._class=function(){};ddg._class.__ddg_props={type:ddg.enums.classification.ddgClass,namespaceName:"ddg",name:"_class",
behaviourName:null,baseClasses:[],interfaces:[],behaviours:[],events:ddg.enums.optionUsage.NotSet,timers:ddg.enums.optionUsage.NotSet,isAbstract:!0,isSealed:!1,options:null,listeners:null,nonOverridable:[]};ddg._class.__ddg_static={};var d=function(){if(!a){this.__ddg_instanceGuid=ddg.getGuid();ddg.util.extend(this,f);ddg._behaviours.createClosures(this);var b=this.getType(),c=arguments,d=null,e=null,g=null;this.ddgApp=window.ddgBaseApp;if(c.length==1&&c[0]&&c[0].__ddg_params){c=c[0];g=this.ddgCreator=
c.__ddg_creator;this.ddgApp=c.__ddg_app?c.__ddg_app:g?g.ddgApp:window.ddgBaseApp;if(c.__ddg_host)this.host=c.__ddg_host;d=c.__ddg_behaviours;e=c.__ddg_events;c=c.__ddg_params}e&&this.bindEvent&&this.bindEvent(e,g);this._ddgOptions=ddg.util.extend({},b.__ddg_props.options);this._buildOptions.apply(this,c);this.init.apply(this,c);this.ddgApp.messages&&this.ddgApp.messages.listen(b.__ddg_props.listeners,this);ddg._behaviours.add(this,b.__ddg_props.behaviours,c);d&&ddg._behaviours.add(this,d,c);this.loaded.apply(this,
c)}};ddg._class.prototype={init:function(){},loaded:function(){},dispose:function(){this.__ddg_timers&&ddg._timers.disposeTimers(this);ddg._behaviours&&ddg._behaviours.disposeBehaviours(this);this.__ddg_events&&ddg._events.disposeEvents(this);this.ddgApp&&this.ddgApp.messages.unlisten({context:this});this.host=this.ddgCreator=this.ddgApp=null;this.__ddg_disposed=!0},getLang:function(){return window.ddgLang.getLang.apply(window.ddgLang,arguments)},getGuid:function(){return this.__ddg_instanceGuid},
clone:function(a){var b=null;return b=a?ddg.util.deepCopy(this):ddg.util.extend({},this)},_buildOptions:function(){return this._ddgOptions}};var e=function(){return ddg.type.getType(this)},f={getType:e,getStatic:e,ddgOptions:function(){return this._ddgOptions}},g={extend:function(e,f,m,l,q,n,h,o,s,v,w,A,B,u){var z=this.prototype;a=!0;var t=new this;a=!1;var i=this.__ddg_props.nonOverridable,r;for(r in o){var p=b.test(o[r]);t[r]=typeof o[r]=="function"&&typeof z[r]=="function"&&p?function(a,b){return function(){var c=
this._super;this._super=z[a];var d=b.apply(this,arguments);this._super=c;return d}}(r,o[r]):o[r]}o=this.__ddg_props.baseClasses.slice(0);o.push(this);r=this.__ddg_props.interfaces.slice(0);for(p=l.length;p--;)r.push(l[p]);l=this.__ddg_props.behaviours.slice(0);for(p=q.length;p--;)l.push(q[p]);q=i.slice(0);for(i=u.length;i--;)q.push(u[i]);u=null;if((i=this.__ddg_props.options)||n)u=ddg.util.extend({},i,n);ddg.util.extend(t,ddg._behaviourExtenders.top);v=c(t,this.__ddg_props.events,v,ddg._eventExtenders);
w=c(t,this.__ddg_props.timers,w,ddg._timerExtenders);n=null;if((i=this.__ddg_props.listeners)||h){n=i?i.clone():[];var x;if(h)for(x in h){i=h[x];p={name:x,fnName:null,fn:null,context:null,exclusive:!1};if(ddg.util.isFunction(i))p.fn=i;else if(ddg.util.isArray(i)){var y=i[0];ddg.util.isFunction(y)?p.fn=y||null:p.fnName=y;p.context=i[1]||null;p.exclusive=Boolean(i[2])}else p.fnName=i;n.push(p)}for(h=n.length;h--;)if(i=n[h],i.fnName)i.fn=t[i.fnName]}h=function(){d.apply(this,arguments)};t.constructor=
h;h.prototype=t;h.__ddg_props={type:ddg.enums.classification.ddgClass,namespaceName:e,name:f,behaviourName:m,baseClasses:o,interfaces:r,behaviours:l,events:v,timers:w,isAbstract:A,isSealed:B,options:u,listeners:n,nonOverridable:q};ddg.util.extend(h,g);h.__ddg_static=ddg.util._extendStatic(this.__ddg_static,s);ddg.util.extend(h,h.__ddg_static);m!=null&&(ddg._behaviourRefs[m]=h);return h},inheritsFrom:function(a){return ddg.type.inheritsFrom(this,a)},implementsInterface:function(a){return ddg.type.implementsInterface(this,
a)},getName:function(){return ddg.type.getName(this)},getFullName:function(){return ddg.type.getFullName(this)},getBase:function(){return ddg.type.getBase(this)}};ddg.util.extend(ddg._class,g)})();ddg.exceptions.printStackTrace=function(a){a=a||{guess:!0};var b=a.e||null;a=!!a.guess;var c=new ddg.exceptions._printStackTrace;b=c.run(b);return a?c.guessAnonymousFunctions(b):b};ddg.exceptions._printStackTrace=function(){};
ddg.exceptions._printStackTrace.prototype={run:function(a){a=a||this.createException();var b=this.mode(a);return b==="other"?this.other(arguments.callee):this[b](a)},createException:function(){try{return this.undef(),null}catch(a){return a}},mode:function(a){if(a.arguments&&a.stack)return this._mode="chrome";else if(a.message&&typeof window!=="undefined"&&window.opera)return this._mode=a.stacktrace?"opera10":"opera";else if(a.stack)return this._mode="firefox";return this._mode="other"},instrumentFunction:function(a,
b,c){a=a||window;var d=a[b];a[b]=function(){c.call(this,printStackTrace().slice(4));return a[b]._instrumented.apply(this,arguments)};a[b]._instrumented=d},deinstrumentFunction:function(a,b){if(a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function)a[b]=a[b]._instrumented},chrome:function(a){a=(a.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,
"{anonymous}()@$1").split("\n");a.pop();return a},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera10:function(a){a=a.stacktrace.split("\n");var b=/.*line (\d+), column (\d+) in ((<anonymous function\:?\s*(\S+))|([^\(]+)\([^\)]*\))(?: in )?(.*)\s*$/i,c,d,e;c=2;d=0;for(e=a.length;c<e-2;c++)if(b.test(a[c])){var f=RegExp.$6+":"+RegExp.$1+":"+RegExp.$2,g=RegExp.$3;g=g.replace(/<anonymous function\:?\s?(\S+)?>/g,"{anonymous}");a[d++]=g+
"@"+f}a.splice(d,a.length-d);return a},opera:function(a){a=a.message.split("\n");var b=/Line\s+(\d+).*script\s+(http\S+)(?:.*in\s+function\s+(\S+))?/i,c,d,e;c=4;d=0;for(e=a.length;c<e;c+=2)b.test(a[c])&&(a[d++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:"{anonymous}()@"+RegExp.$2+":"+RegExp.$1)+" -- "+a[c+1].replace(/^\s+/,""));a.splice(d,a.length-d);return a},other:function(a){for(var b=/function\s*([\w\-$]+)?\s*\(/i,c=[],d,e;a&&c.length<10;)d=b.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",
e=Array.prototype.slice.call(a.arguments||[]),c[c.length]=d+"("+this.stringifyArguments(e)+")",a=a.caller;return c},stringifyArguments:function(a){for(var b=Array.prototype.slice,c=0;c<a.length;++c){var d=a[c];d===void 0?a[c]="undefined":d===null?a[c]="null":d.constructor&&(d.constructor===Array?a[c]=d.length<3?"["+this.stringifyArguments(d)+"]":"["+this.stringifyArguments(b.call(d,0,1))+"..."+this.stringifyArguments(b.call(d,-1))+"]":d.constructor===Object?a[c]="#object":d.constructor===Function?
a[c]="#function":d.constructor===String&&(a[c]='"'+d+'"'))}return a.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)return b.open("GET",a,!1),b.setRequestHeader("User-Agent","XMLHTTP/1.0"),b.send(""),b.responseText},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=
0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return a.indexOf(location.hostname)!==-1},getSource:function(a){a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n"));return this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=a[b],d=/\{anonymous\}\(.*\)@(\w+:\/\/([\-\w\.\/]+)+(:\d+)?[^:]+):(\d+):?(\d+)?/.exec(c);if(d){var e=d[1],f=d[4];d=d[7]||0;e&&this.isSameDomain(e)&&f&&(e=this.guessAnonymousFunction(e,
f,d),a[b]=c.replace("{anonymous}",e))}}return a},guessAnonymousFunction:function(a,b){var c;try{c=this.findFunctionName(this.getSource(a),b)}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},findFunctionName:function(a,b){for(var c=/function\s+([^(]*?)\s*\(([^)]*)\)/,d=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*function\b/,e=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(?:eval|new Function)\b/,f="",g,j=0;j<10;++j)if(g=a[b-j]){f=g+f;if((g=d.exec(f))&&g[1])return g[1];if((g=c.exec(f))&&
g[1])return g[1];if((g=e.exec(f))&&g[1])return g[1]}return"(?)"}};ddg.exceptions.register=function(a,b,c,d){b[c]=a.extend(b,c,null,[],[],null,null,d,{},ddg.enums.optionUsage.NotSet,ddg.enums.optionUsage.NotSet,!1,!1,[])};
ddg.exceptions.register(ddg._class,ddg,"exception",{_message:"An exception has occurred.",_browserException:null,_stackTrace:"",_loggedToConsole:!1,init:function(a){var b=!0;if(ddg.util.isDefined(a)){if(ddg.util.isDefined(a.msg))this._message=a.msg;if(ddg.util.isDefined(a.ex))this._browserException=a.ex;if(ddg.util.isDefined(a.buildStackTrace))b=a.buildStackTrace}b&&this._captureStackTrace()},message:function(a){if(ddg.util.isSomething(a))this._message=a;return this._message},stackTrace:function(){this._stackTrace===
""&&this._captureStackTrace();return this._stackTrace},logToConsole:function(){if(!this._loggedToConsole)window.console&&console.log&&console.log(this.logToConsoleMessage()),this._loggedToConsole=!0},logToConsoleMessage:function(){return'\nException stack trace for "'+this.message()+'":\n\n'+this.stackTrace()+"\n\n"},toString:function(){this.logToConsole();return this.getType().getFullName()+": "+this.message()},_captureStackTrace:function(){this._stackTrace=ddg.exceptions.printStackTrace({e:this._browserException}).join("\n")}});
ddg.exceptions.register(ddg.exception,ddg.exceptions,"notFoundException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"invalidTypeException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"duplicateException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"missingParameterException",{init:function(a){this._super(a)}});
ddg.exceptions.register(ddg.exception,ddg.exceptions,"invalidValueException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"criticalException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"missingDependencyException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"notImplementedException",{init:function(a){this._super(a)}});
ddg.exceptions.register(ddg.exception,ddg.exceptions,"msAjaxProxyException",{_msAjaxError:null,init:function(a){this._super(a);this._msAjaxError=a.msAjaxError},logToConsoleMessage:function(){var a=this._msAjaxError;return this._super()+"\n\n----Inner exception----:\nStack trace: "+a.get_stackTrace()+"\nError: "+a.get_message()+"\nStatus code: "+a.get_statusCode()+"\nException type: "+a.get_exceptionType()+"\nTimed out: "+a.get_timedOut()+"\n\n"}});
ddg.exceptions.register(ddg.exception,ddg.exceptions,"jQueryAjaxProxyException",{_jqXHR:null,_textStatus:null,_errorThrown:null,_errorMessage:null,init:function(a){this._super(a);this._jqXHR=a.jqXHR;this._textStatus=a.textStatus;this._errorThrown=a.errorThrown;a=/<title>([A-Z_]*)<\/title>/i.exec(this._jqXHR.responseText);if(a!=null&&a.length>1)this._errorMessage=a[1]},logToConsoleMessage:function(){var a=this._jqXHR;return this._super()+"\n\nError: "+this._errorMessage+"\nStatus code: "+a.status+
"\nComplete response:\n"+a.responseText+"\n\n"},errorMessage:function(){return this._errorMessage||""}});ddg.exceptions.register(ddg.exceptions.invalidValueException,ddg.exceptions,"outOfRangeException",{init:function(a){this._super(a)}});ddg.exceptions.register(ddg.exception,ddg.exceptions,"exclusivityException",{init:function(a){this._super(a)}});
(function(){ddg.util.extend(window.ddg,{appName:"dotDigitalGroup Library",version:"1.0",_guid:1,_onloadFn:[],_isLoaded:!1,_behaviourRefs:{},registerNamespace:function(a){var c=ddg.util.getSafely(a);if(!c){c=window;a=a.split(".");for(var d=0;d<a.length;d++)ddg.util.isUndefined(c[a[d]])&&(c[a[d]]={}),c=c[a[d]]}return c},registerExtension:ddg.extensions.registerExtension,registerEnum:function(a){var c=ddg._getTypeDetail(a.name);c.namespace[c.name]=ddg._enum.createEnum(c.namespaceName,c.name,a.def)},
registerInterface:function(a){var c=ddg._getTypeDetail(a.name);c.namespace[c.name]=ddg._interface.createInterface(c.namespaceName,c.name,a.def)},registerClass:function(a){a=a||{};if(a.base&&typeof a.base=="string")a.base=eval(a.base);for(var c=a.base?a.base:ddg._class,d=a.name,e=ddg.util.isSomething(a.behaviourName)?a.behaviourName:null,f=ddg.util.isSomething(a.interfaces)?ddg.util.ensureArray(a.interfaces):[],g=f.length;g--;)typeof f[g]=="string"&&(f[g]=eval(f[g]));g=ddg.util.isSomething(a.behaviours)?
ddg.util.ensureArray(a.behaviours):[];var j=a.options||null,k=a.listeners||null,m=a.def?a.def:{},l=a.staticDef?a.staticDef:{},q=a.disableEvents?ddg.enums.optionUsage.Disable:a.useEvents?ddg.enums.optionUsage.Use:ddg.enums.optionUsage.NotSet,n=a.disableTimers?ddg.enums.optionUsage.Disable:a.useTimers?ddg.enums.optionUsage.Use:ddg.enums.optionUsage.NotSet,h=ddg.util.isDefined(a.isAbstract)?a.isAbstract:!1,o=ddg.util.isDefined(a.isSealed)?a.isSealed:!1,s=ddg.util.isDefined(a.nonOverridable)?ddg.util.ensureArray(a.nonOverridable):
[];d=ddg._getTypeDetail(d);a=a.staticDef&&!a.def?l:c.extend(d.namespaceName,d.name,e,f,g,j,k,m,l,q,n,h,o,s);d.namespace[d.name]=a},create:function(a){a=a||{};var c=[];ddg.util.isDefined(a.params)&&(c=ddg.util.ensureArray(a.params));return new a.type({__ddg_params:c,__ddg_app:a.app||null,__ddg_creator:a.creator||null,__ddg_host:a._host||null,__ddg_behaviours:a.behaviours||null,__ddg_events:a.events||null})},getGuid:function(){return this._guid++},onload:function(a){ddg._isLoaded?a():ddg._onloadFn.push(a)},
loader:function(){setTimeout(function(){window.ddg._isLoaded=!0;for(var a=0,c=ddg._onloadFn.length;a<c;a++)ddg._onloadFn[a]()},1)},_getTypeDetail:function(a){var c={namespaceName:"",namespace:window,name:a};if(a.contains("."))c.namespaceName=ddg._pullNamespace(a),c.namespace=ddg.registerNamespace(c.namespaceName),c.name=ddg._pullName(a);return c},_pullNamespace:function(a){return a.substring(0,a.lastIndexOf("."))},_pullName:function(a){return a.substring(a.lastIndexOf(".")+1)}});var a=window.ddgjQuery||
window.jQuery;a?($ddg=a,$ddg(function(){ddg.loader()})):(window.$ddg=function(){throw new ddg.exceptions.missingDependencyException({msg:"jQuery is required to use certain parts of this library. Please include jQuery before the ddg library code."});},window.$ddg.missing=!0,ddg.util.addEvent(window,"load",function(){ddg.loader()}));$ddgcreate=ddg.create;$ddgload=ddg.onload})();ddg.registerInterface({name:"ddg.IImportantifiable",def:{importantify:function(){}}});
ddg.registerClass({name:"ddg.geometry.rectangle",def:{x:null,y:null,width:null,height:null,x2:null,y2:null,init:function(a,b,c,d){this._super();if(ddg.util.isSomething(b))this.x=a,this.y=b,this.width=c,this.height=d,this.calc();else if(ddg.util.isDefined(a.from))this.from(a.from,a.usePosition,a.innerSize);else{if(ddg.util.isSomething(a.x))this.x=a.x;if(ddg.util.isSomething(a.y))this.y=a.y;if(ddg.util.isSomething(a.width))this.width=a.width;if(ddg.util.isSomething(a.height))this.height=a.height;if(ddg.util.isSomething(a.x2))this.x2=
a.x2;if(ddg.util.isSomething(a.y2))this.y2=a.y2;this.calc()}},from:function(a,b,c){a=ddg.ui.util.resolvej(a);b=this._getTopLeft(a,b,c);this.x=b.left;this.y=b.top;this.width=c?a.innerWidth():a.outerWidth();this.height=c?a.innerHeight():a.outerHeight();this.calc()},add:function(a,b,c){var d;ddg.type.inheritsFrom(a,ddg.geometry.rectangle)?(b=a.x,d=a.y,c=a.x2,a=a.y2):(a=ddg.ui.util.resolvej(a),c=this._getTopLeft(a,b,c),b=c.left,d=c.top,c=b+a.outerWidth(),a=d+a.outerHeight());if(b<this.x)this.x=b;if(c>
this.x2)this.x2=c;if(d<this.y)this.y=d;if(a>this.y2)this.y2=a;this.width=this.height=null;this.calc()},cloneAdd:function(a,b){var c=this.clone();c.add(a,b);return c},setX:function(a,b){this.x=a;b?this.width=null:this.x2=null;this.calcX()},setY:function(a,b){this.y=a;b?this.height=null:this.y2=null;this.calcY()},setPosition:function(a,b){this.x=a;this.y=b;this.y2=this.x2=null;this.calc()},setWidth:function(a,b){this.width=a;b?this.x=null:this.x2=null;this.calcX()},setHeight:function(a,b){this.height=
a;b?this.y=null:this.y2=null;this.calcY()},setSize:function(a,b){this.width=a;this.height=b;this.y2=this.x2=null;this.calc()},setX2:function(a,b){this.x2=a;b?this.x=null:this.width=null;this.calcX()},setY2:function(a,b){this.y2=a;b?this.y=null:this.height=null;this.calcY()},calc:function(){this.calcX();this.calcY()},calcX:function(){if(this.x!==null&&this.width!==null)this.x2=this.x+this.width;else if(this.x!==null&&this.x2!==null)this.width=this.x2-this.x;else if(this.width!==null&&this.x2!==null)this.x=
this.x2-this.width},calcY:function(){if(this.y!==null&&this.height!==null)this.y2=this.y+this.height;else if(this.y!==null&&this.y2!==null)this.height=this.y2-this.y;else if(this.height!==null&&this.y2!==null)this.y=this.y2-this.height},intersectsWith:function(a){a=ddg.util.ensureArray(a);for(var b=!1,c=a.length;c--;){var d=a[c];b=b||(this.x>=d.x&&this.x<=d.x2||this.x2>=d.x&&this.x2<=d.x2)&&(this.y>=d.y&&this.y<=d.y2||this.y2>=d.y&&this.y2<=d.y2)}return b},centerIn:function(a){return new ddg.geometry.point(Math.floor((a.width-
this.width)/2)+a.x,Math.floor((a.height-this.height)/2)+a.y)},toPoint:function(){return new ddg.geometry.point(this.x,this.y)},toSize:function(){return new ddg.geometry.size(this.width,this.height)},_getTopLeft:function(a,b,c){if(b){b=a.position();var d=a.margin();b.left+=d.left;b.top+=d.top}else b=a.offset();c&&(a=a.border(),b.left+=a.left,b.top+=a.top);return b}}});ddg.registerClass({name:"ddg.geometry.point",def:{x:0,y:0,init:function(a,b){this._super();this.x=a;this.y=b}}});
ddg.registerClass({name:"ddg.geometry.size",def:{width:0,height:0,init:function(a,b){this._super();this.width=a;this.height=b}}});
(function(){var a=function(a,c){return c};ddg.registerClass({name:"ddg._applicationDefinition",staticDef:{messages:null,cache:null,init:function(a){this.ddgApp=this;this._super(a);this._setupComponentSystems();this._setupControlSystems()},callAsync:function(a){a=a||{};if(!a.cache)a.cache=this.cache;window.ddgAsync.call(a)},_buildOptions:function(a){var c=this._super(a);a=a||{};c=this._buildComponentOptions(a,c);return c=this._buildControlOptions(a,c)},_buildComponentOptions:a,_buildControlOptions:a,
_setupComponentSystems:function(){this.messages=$ddgcreate({type:ddg.systems.message,app:this});this.cache=$ddgcreate({type:ddg.systems.cache,app:this})},_setupControlSystems:function(){}}})})();
ddg.registerClass({name:"ddg._eventExtenders",staticDef:{__ddg_events:null,__ddg_contextDefault:null,raiseEvent:function(a){if(this.__ddg_events&&a.name){var b=ddg.util.isSomething(a.args)?a.args:null;ddg._events.raiseEvent(this,a.sender||this.__ddg_contextDefault||this,a.name,b)}},bindEvent:function(a,b){var c=ddg.util.isArray(a);if(a&&(c||ddg.util.isDefined(a.name)&&ddg.util.isDefined(a.fn))){c||(a=[a]);var d=0;for(c=a.length;d<c;d++)a[d].name&&a[d].fn&&ddg._events.bindEvent(this,a[d].name,a[d].fn,
a[d].context||b||this.__ddg_contextDefault||this,ddg.util.isDefined(a[d].exclusive)?a[d].exclusive:!1)}else if(ddg.util.isObject(a))for(d in a)c=a[d],c=ddg.util.ensureArray(c),ddg.util.isFunction(c[0])&&ddg._events.bindEvent(this,d,c[0],c[1]||b||this.__ddg_contextDefault||this,ddg.util.isDefined(c[2])?c[2]:!1)},unbindEvent:function(a,b){var c=ddg.util.isArray(a);if(!a||c||"name"in a||"context"in a){a=a||{};c||(a=[a]);var d=0;for(c=a.length;d<c;d++)ddg._events.unbindEvent(this,a[d].name||null,a[d].context||
b||null,a[d].fn||null)}else if(ddg.util.isObject(a))for(d in a)c=ddg.util.ensureArray(a[d]),ddg._events.unbindEvent(this,d,c[1]||b||null,ddg.util.isFunction(c[0])?c[0]:null)}}});
ddg.registerClass({name:"ddg._events",staticDef:{globalEventName:"__ddg_global",raiseEvent:function(a,b,c,d){c=c.toLowerCase();b=[b,d,c];if(a.__ddg_events&&a.__ddg_events[c])for(var e in a.__ddg_events[c])for(var f in a.__ddg_events[c][e])if(f!="context"&&e!="__ddg_exclusive"&&(a.__ddg_events[c][e][f].apply(a.__ddg_events[c][e].context,b),!a.__ddg_events))return},bindEvent:function(a,b,c,d,e){if(!c.__ddg_handlerGuid)c.__ddg_handlerGuid=ddg.getGuid();if(!d.__ddg_instanceGuid)d.__ddg_instanceGuid=ddg.getGuid();
b=b.toLowerCase();if(a.__ddg_events==null)a.__ddg_events={};a.__ddg_events[b]||(a.__ddg_events[b]={__ddg_exclusive:Boolean(e)});a.__ddg_events[b][d.__ddg_instanceGuid]||(a.__ddg_events[b][d.__ddg_instanceGuid]={context:d});a.__ddg_events[b][d.__ddg_instanceGuid][c.__ddg_handlerGuid]=c},unbindEvent:function(a,b,c,d){if(a.__ddg_events)if(!b&&!c&&!d)a.__ddg_events=null;else if(b&&!c)delete a.__ddg_events[b],ddg._events.eventsCleanup(a);else if(b&&c)a.__ddg_events[b]&&c.__ddg_instanceGuid&&(d?(a.__ddg_events[b][c.__ddg_instanceGuid]&&
d.__ddg_handlerGuid&&delete a.__ddg_events[b][c.__ddg_instanceGuid][d.__ddg_handlerGuid],ddg._events.contextCleanup(a,b,c.__ddg_instanceGuid)):(delete a.__ddg_events[b][c.__ddg_instanceGuid],ddg._events.eventCleanup(a,b)));else if(c&&c.__ddg_instanceGuid)for(var e in a.__ddg_events)d?a.__ddg_events[e][c.__ddg_instanceGuid]&&d.__ddg_handlerGuid&&(delete a.__ddg_events[e][c.__ddg_instanceGuid][d.__ddg_handlerGuid],ddg._events.contextCleanup(a,e,c.__ddg_instanceGuid)):(delete a.__ddg_events[e][c.__ddg_instanceGuid],
ddg._events.eventCleanup(a,e))},disposeEvents:function(a){delete a.__ddg_events},eventsCleanup:function(a){var b=0,c;for(c in a.__ddg_events)if(++b>0)break;if(b==0)try{delete a.__ddg_events}catch(d){}},eventCleanup:function(a,b){var c=!1,d;for(d in a.__ddg_events[b])if(d!=="__ddg_exclusive"){c=!0;break}c||delete a.__ddg_events[b];ddg._events.eventsCleanup(a)},contextCleanup:function(a,b,c){var d=0,e;for(e in a.__ddg_events[b][c])if(++d>1)break;d==1&&delete a.__ddg_events[b][c];ddg._events.eventCleanup(a,
b)}}});ddg._timerExtenders={__ddg_timers:null,everyTime:function(a){a=ddg._timers.sanitizeConstruct(this,a);ddg._timers.add(this,a.interval,a.groupName,a.fn,a.times,a.context)},oneTime:function(a){a=ddg._timers.sanitizeConstruct(this,a);ddg._timers.add(this,a.interval,a.groupName,a.fn,1,a.context)},stopTime:function(a){var b=null,c=null;a=a||{};if(ddg.util.isDefined(a.groupName))b=a.groupName;if(ddg.util.isDefined(a.fn))c=a.fn;ddg._timers.remove(this,b,c)}};
ddg.registerClass({name:"ddg._timers",staticDef:{_regex:/^([0-9]+(?:\.[0-9]*)?)\s*(ms|s|m|h)?$/,_powers:{ms:1,s:1E3,m:6E4,h:36E5},add:function(a,b,c,d,e,f){var g=a.__ddg_timers||(a.__ddg_timers={});g[c]||(g[c]={});d.__ddg_handlerGuid=d.__ddg_handlerGuid||ddg.getGuid();var j=0,k=function(){var b=!1;++j===e&&(ddg._timers.remove(a,c,d),b=!1);d.apply(f,[j])===!1&&!b&&ddg._timers.remove(a,c,d)};k.__ddg_handlerGuid=d.__ddg_handlerGuid;g[c][d.__ddg_handlerGuid]||(g[c][d.__ddg_handlerGuid]=window.setInterval(k,
b))},remove:function(a,b,c){var d=a.__ddg_timers;if(d){if(b){if(d[b]){if(c){if(c=c.__ddg_handlerGuid)window.clearInterval(d[b][c]),delete d[b][c]}else for(c in d[b])window.clearInterval(d[b][c]),delete d[b][c];c=null;for(c in d[b])break;c||delete d[b]}}else for(b in d)this.remove(a,b,c);c=null;for(c in d)break;if(!c)a.__ddg_timers=null}},timeParse:function(a){if(ddg.util.isNothing(a))return null;else if(ddg.util.isNumeric(a))return a;else{var b=this._regex.exec(a.toString().trim());return b[2]?parseFloat(b[1])*
(this._powers[b[2]]||1):parseFloat(a)}},sanitizeConstruct:function(a,b){var c=ddg.util.extend({},b);c.interval=ddg._timers.timeParse(b.interval);c.groupName=ddg.util.isDefined(b.groupName)?b.groupName:c.interval.toString();c.fn=b.fn;var d=b.times;c.times=ddg.util.isDefined(d)&&ddg.util.isNumeric(d)?d:0;c.context=b.context?b.context:a;return c},disposeTimers:function(a){this.remove(a)}}});ddg.registerInterface({name:"ddg.behaviours.IBehaviour",def:{exec:function(){},exists:!0}});
ddg.registerClass({name:"ddg.behaviours.base",behaviourName:"__base",interfaces:ddg.behaviours.IBehaviour,isAbstract:!0,def:{exec:function(){var a=this[[].shift.call(arguments)];if(a)return a.apply(this,arguments)},exists:!0}});
ddg.registerClass({name:"ddg.behaviours.rollingWindow",base:ddg.behaviours.base,behaviourName:"rollingWindow",useEvents:!0,options:{duration:1E3,continuous:!1},def:{_timerID:null,_active:!1,_continuous:!1,dispose:function(){this.stop();this._timerID=null;this._super()},duration:function(a){if(ddg.util.isDefined(a))this._ddgOptions.duration=a;else return this._ddgOptions.duration},continuous:function(a){if(ddg.util.isDefined(a))this._ddgOptions.continuous=a;else return this._ddgOptions.continuous},
start:function(){this._start()},restart:function(){this._stop();this._start()},stop:function(){this._stop()},active:function(){return this._active},_buildOptions:function(a){var b=this._super(a);ddg.util.isDefined(a.duration)&&this.duration(a.duration);ddg.util.isDefined(a.continuous)&&this.continuous(a.continuous);return b},_start:function(){var a=this._ddgOptions,b=a.duration,c=this._windowElapsed.bind(this);this._timerID=(this._continuous=a.continuous)?setInterval(c,b):setTimeout(c,b);this._active=
!0},_windowElapsed:function(){this.raiseEvent({name:"windowElapsed"})},_stop:function(){if(this._timerID!==null)this._continuous?clearInterval(this._timerID):clearTimeout(this._timerID),this._timerID=null,this._active=!1}}});ddg.registerClass({name:"ddg.components.base",useEvents:!0,def:{init:function(a){this._super(a)},dispose:function(){this.raiseEvent({name:"dispose"});this._super()}}});
ddg.registerClass({name:"ddg.systems.message",base:ddg.components.base,def:{__ddg_events:null,__ddg_contextDefault:null,init:function(a){this._super(a);a=a||{};this.__ddg_eventDefault=void 0;this.__ddg_contextDefault=a.app||window.ddgBaseApp},send:ddg._eventExtenders.raiseEvent,listen:ddg._eventExtenders.bindEvent,unlisten:ddg._eventExtenders.unbindEvent}});
ddg.registerClass({name:"ddg.systems.cache",base:ddg.components.base,useEvents:!0,def:{_cache:null,_itemCount:null,init:function(a){this._super(a);this._cache={};this._itemCount=0},dispose:function(){this.clear();this._itemCount=this._cache=null;this._super()},add:function(a,b){this._beforeAdd(b,a);this._cache[a]=b;this._itemCount++;this._added()},get:function(a){this._beforeGet();var b=null;b=this._cache[a];this._got(b);return b},remove:function(a){this._beforeRemove();var b=null;if(b=this._cache[a])delete this._cache[a],
this._itemCount--;this._removed(b);return b},clear:function(){this._cache={};this._itemCount=0},_beforeAdd:function(){this.raiseEvent({name:"beforeAdd"})},_added:function(){this.raiseEvent({name:"added"})},_beforeGet:function(){this.raiseEvent({name:"beforeGet"})},_got:function(){this.raiseEvent({name:"got"})},_beforeRemove:function(){this.raiseEvent({name:"beforeRemove"})},_removed:function(){this.raiseEvent({name:"removed"})}}});
ddg.registerClass({name:"ddg.systems._language",base:ddg.components.base,isSealed:!0,def:{_langStrings:null,_langStringsLower:!1,init:function(){this._super();this.getLang=ddg.systems._language.prototype._getLangSingle},langStringsLower:function(a){if(ddg.util.isSomething(a))this._langStringsLower=a;else return this._langStringsLower},add:function(a){a=ddg.util.ensureArray(a);for(var b=0,c=a.length;b<c;b++)this._add(a[b])},clear:function(){this._langStrings=null;this.getLang=ddg.systems._language.prototype._getLangSingle},
_add:function(a){if(this._langStrings!=null){if(!ddg.util.isArray(this._langStrings))this._langStrings=[this._langStrings],this.getLang=ddg.systems._language.prototype._getLangArray;this._langStrings.push(a)}else this._langStrings=a},_getLangSingle:function(a){this._langStringsLower&&(a=a.toLowerCase());if(!this._langStrings||!ddg.util.isDefined(this._langStrings[a]))return"";return this._langStrings[a]},_getLangArray:function(a){this._langStringsLower&&(a=a.toLowerCase());for(var b=this._langStrings.length;b--;){var c=
this._langStrings[b];if(ddg.util.isDefined(c[a]))return c[a]}return""}}});
ddg.registerClass({name:"ddg.systems._async",base:ddg.components.base,isSealed:!0,def:{_asyncCount:0,init:function(a){this._super(a)},asyncCount:function(){return this._asyncCount},inAsync:function(){return Boolean(this.asyncCount())},call:function(a){if(!ddg.util.isDefined(a.dataSourceType))a.dataSourceType=ddg.ui.enums.dataSourceType.MSAjaxFunction;if(a.dataSourceType==ddg.ui.enums.dataSourceType.MSAjaxFunction){if(!a.async||!ddg.util.isFunction(a.async))throw new ddg.exceptions.missingParameterException({msg:"construct.async (function) must exist to execute ddg.systems._async.call"});
}else if(a.dataSourceType==ddg.ui.enums.dataSourceType.JQueryAjax&&(!a.async||!ddg.util.isString(a.async)&&!ddg.util.isObject(a.async)))throw new ddg.exceptions.missingParameterException({msg:"construct.async (string||jQuery.ajax.settings) must exist to execute ddg.systems._async.call"});if(!a.success||!ddg.util.isFunction(a.success))throw new ddg.exceptions.missingParameterException({msg:"construct.success (function) must exist to execute ddg.systems._async.call"});a.successArgs=ddg.util.ensureArray(a.successArgs);
if(!a.failFn||!ddg.util.isFunction(a.failFn))throw new ddg.exceptions.missingParameterException({msg:"construct.failFn (function) must exist to execute ddg.systems._async.call"});a.context=a.context||window;if(a.cacheKey&&(!a.cache||!ddg.util.isDefined(a.cache)))throw new ddg.exceptions.missingParameterException({msg:"construct.cache (ddg.systems.cache) must exist when a cacheKey is specified to execute ddg.systems._async.call"});a.cacheOverride=ddg.util.isDefined(a.cacheOverride)?Boolean(a.cacheOverride):
!1;this._call(a.async,a.dataSourceType,a.asyncArgs,a.success,a.successArgs,a.successArgsPrep,a.failFn,a.context,a.cacheKey,a.cache,a.cacheOverride)},_call:function(a,b,c,d,e,f,g,j,k,m,l){var q=ddg.util.isDefined(k),n=this,h=function(a){n._asyncCount--;q&&m.add(k,a);e=ddg.util.ensureArray(e);ddg.util.isFunction(f)&&f(e,a);d.apply(j,e)},o=null;if(q&&!l&&(o=m.get(k))){h(o);return}l=function(){n._asyncCount--;g.apply(j,arguments)};b==ddg.ui.enums.dataSourceType.MSAjaxFunction?(c=ddg.util.ensureArray(c),
c.push(h),c.push(l),this._asyncCount++,a.apply(j,c)):b==ddg.ui.enums.dataSourceType.JQueryAjax&&(b={type:"POST",cache:!1,data:c,success:h,error:l},ddg.util.isString(a)?$ddg.extend(b,{url:a}):b=$ddg.extend({},a,b),$ddg.ajax(b))}}});
ddg.registerClass({name:"ddg.components.app",base:ddg.components.base,interfaces:ddg.IImportantifiable,useEvents:!0,options:{importantify:!1},def:ddg.util.extend({},ddg._applicationDefinition,{importantify:function(){return this._ddgOptions.importantify},_buildComponentOptions:function(a,b){if(ddg.util.isDefined(a.importantify))b.importantify=Boolean(a.importantify);return b}})});
ddg.registerClass({name:"ddg.components.baseApp",base:ddg.components.app,def:{init:function(a){this._super(a);$ddg(window).bind("resize.baseApp",this._windowResize.bind(this))},_windowResize:function(a){this.messages.send({name:"viewport.resize",args:a})}}});
ddg.registerClass({name:"ddg.debugConstruct",def:{_output:null,_ttStartDate:null,_ttLastSplit:null,_maxHeight:300,debugEnabled:!0,_loaded:!1,_debugMessages:!1,_debugEvents:!1,_timeTestTimers:null,_inspector:null,load:function(){if(this.debugEnabled&&$ddg)this._output=$ddg("<div />",{css:{fontSize:"11px",overflow:"hidden",maxHeight:300,overflowY:"auto",width:350,position:"fixed",right:0,bottom:0,background:"#eee",border:"solid 1px #666666",zIndex:"1000000"},className:ddg.uiCss.debug.alert}).appendTo("body"),
this._loaded=!0},alert:function(a){this._loaded||this.load();this._output&&($ddg("<div />",{css:{position:"relative",background:"#eee",color:"#000",padding:"1px 4px",zIndex:"1000000"},html:a}).appendTo(this._output).height(),this._output.scrollTop(1E6))},ttStart:function(a){this._ttStartDate=this._ttLastSplit=new Date;this.alert("[TT started"+(ddg.util.isSomething(a)?": "+a:"")+"]")},ttSplit:function(a){if(this._ttStartDate){var b=new Date;this.alert(b-this._ttStartDate+"ms ("+(b-this._ttLastSplit)+
"ms): "+a);this._ttLastSplit=b}},timeTestRun:function(a){this._checkForTimeTestTimer(a);a=this._timeTestTimers[a];if(!a.running)a.startTime=new Date,a.running=!0},timeTestStop:function(a){this._checkForTimeTestTimer(a);a=this._timeTestTimers[a];if(a.running)a.total+=a.startTime?new Date-a.startTime:0,a.running=!1},timeTestAlert:function(){this.alert("<b>Time Test</b><hr/>");for(var a in this._timeTestTimers)this.alert(a+": "+this._timeTestTimers[a].total+"ms");this.alert("<hr/>");this._timeTestTimers=
null},debugMessages:function(a){if(ddg.util.isSomething(a))this._debugMessages=!!a;return this._debugMessages},debugEvents:function(a){if(ddg.util.isSomething(a))this._debugEvents=!!a;return this._debugEvents},debugKeyEvents:function(){$ddgkeys.debugKeyEvents()},showInspector:function(){this._inspector?this._inspector.focus():this._inspector=$ddgcreate({type:ddg.debug.Inspector.app});return this._inspector},hideInspector:function(){return this._inspector?(this._inspector.dispose(),this._inspector=
null,!0):!1},_checkForTimeTestTimer:function(a){if(!this._timeTestTimers)this._timeTestTimers={};this._timeTestTimers[a]||(this._timeTestTimers[a]={startTime:null,total:0,running:!1})}}});
ddg.registerClass({name:"ddg.text.stringBuilder",def:{_parts:null,_value:null,_len:0,init:function(a){this._super();this._parts=ddg.util.isSomething(a)&&a!=""?[a.toString()]:[];this._value={};this._len=0},dispose:function(){this._value=this._parts=null;this._super()},append:function(a){this._parts.push(a);return this},appendLine:function(a){this._parts.push(ddg.util.isSomething(a)&&a!=""?a+"\n":"\n");return this},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){return!this._parts.length||
!this.toString()},toString:function(a){a=a||"";var b=this._parts;if(this._len!==b.length)this._value={},this._len=b.length;var c=this._value,d=c[a];if(ddg.util.isUndefined(d)){if(a!=="")for(d=0;d<b.length;){var e=b[d];ddg.util.isNothing(e)||e===""?b.splice(d,1):d++}c[a]=d=b.join(a)}return d}}});ddg.registerClass({name:"ddg.command.base",isAbstract:!0,def:{_isExecuted:!1,execute:function(){this._isExecuted=!0},isExecuted:function(){return this._isExecuted}}});
ddg.registerClass({name:"ddg.xml.util",staticDef:{load:function(a,b){$ddg.ajax({type:"GET",url:a,dataType:"xml",success:function(a){b(a)}})},loadSerial:function(a){xhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xhttp.open("GET",a,!1);xhttp.send("");return xhttp.responseXML},applyXSLT:function(a,b){var c="";xml=ddg.xml.util.loadSerial(a);xsl=ddg.xml.util.loadSerial(b);window.ActiveXObject?c=xml.transformNode(xsl):document.implementation&&document.implementation.createDocument&&
(xsltProcessor=new XSLTProcessor,xsltProcessor.importStylesheet(xsl),c=xsltProcessor.transformToFragment(xml,document));return c}}});window.ddgBaseApp=$ddgcreate({type:ddg.components.baseApp});window.ddg.debug={};(function(){var a=function(){},b;for(b in ddg.debugConstruct.prototype)typeof ddg.debugConstruct.prototype[b]=="function"&&(window.ddg.debug[b]=a)})();$ddgload(function(){window.ddgLang=$ddgcreate({type:ddg.systems._language});window.ddgAsync=$ddgcreate({type:ddg.systems._async})});
